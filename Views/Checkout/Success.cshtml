@{
    ViewData["Title"] = "¡Pago Exitoso!";
}

<main class="bg-green-50 flex items-center justify-center min-h-screen">
    <div class="bg-white p-8 rounded-2xl shadow-lg max-w-md text-center">
        <div class="flex justify-center mb-4">
            <div id="circle" class="bg-green-100 text-green-600 rounded-full p-4 scale-0 transition-transform duration-300">
                <svg xmlns="http://www.w3.org/2000/svg" class="h-10 w-10" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2">
                    <path id="check" class="path" stroke-linecap="round" stroke-linejoin="round" d="M5 13l4 4L19 7" style="stroke-dasharray: 100; stroke-dashoffset: 100; transition: stroke-dashoffset 0.6s ease-out;" />
                </svg>
            </div>
        </div>
        <h2 class="text-2xl font-bold text-green-700 mb-2">¡Pago Exitoso!</h2>
        <p class="text-gray-600 mb-6">@ViewBag.Message</p>
        <a href="/" class="inline-block bg-[#13678A] hover:bg-[#0D4F65] text-white font-semibold py-2 px-6 rounded-xl transition duration-300">
            Volver a la tienda
        </a>
    </div>
</main>

@section Scripts {
    <script src="~/js/success.js"></script>
    <script>
        // Limpiar el carrito cuando la página carga completamente
        document.addEventListener('DOMContentLoaded', function() {
            // Limpiar LocalStorage
            localStorage.removeItem('cart');
            
            // También limpiar sessionStorage por si se usó
            if(sessionStorage.getItem('checkoutCart')) {
                sessionStorage.removeItem('checkoutCart');
            }
            
            console.log('Carrito limpiado después del pago.');
        });
    </script>
}